"use strict";const empty=0,you=1,ai=-1;function startGame(){const e=[],n=document.querySelector(".game__table");for(let t=0;t<3;t++){const o=document.createElement("tr");n.appendChild(o);const r=[];e.push(r);for(let n=0;n<3;n++){const u=document.createElement("td");u.classList.add("game__cell"),u.onclick=playerMove(e,n,t),o.appendChild(u),r.push({value:0,element:u})}}}function playerMove(e,n,t){return function(){move(e,n,t,1)&&(wins(e,1)?gameOver("Вы выиграли!"):aiMove(e))}}function move(e,n,t,o){const r=e[t][n];return 0==r.value&&(r.value=o,r.element.innerHTML=1==o?"X":"O",!0)}function gameOver(e){setTimeout((function(){alert(e),window.location.reload()}),100)}function wins(e,n){function t(t,o,r,u){const l=e[o][t].value,c=e[o+u][t+r].value,a=e[o+2*u][t+2*r].value;return l==c&&c==a&&l==n}for(let e=0;e<3;e++)if(t(0,e,1,0)||t(e,0,0,1))return!0;return t(0,0,1,1)||t(2,0,-1,1)}function validMoves(e){const n=[];for(let t=0;t<3;t++)for(let o=0;o<3;o++)0==e[t][o].value&&n.push({x:o,y:t});return n}function findRandomMove(e){let n=validMoves(e);return 0==n.length?null:n[Math.floor(Math.random()*n.length)]}function findBestMove(e,n){if(wins(e,n))return{score:n};if(wins(e,-n))return{score:-n};const t=validMoves(e);if(0==t.length)return{score:0};const o=[];for(let r=0;r<t.length;r++){const u=t[r],l=e[u.y][u.x];l.value=n;const c=findBestMove(e,-n);c.move=u,o.push(c),l.value=0}return o.sort((function(e,t){return(t.score-e.score)*n})),o[0]}function aiMove(e){let n=findBestMove(e,-1).move;n?(move(e,n.x,n.y,-1),wins(e,-1)&&gameOver("Выиграл компьютер!")):gameOver("Ничья!")}startGame();